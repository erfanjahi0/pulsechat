<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Settings — PulseChat</title>
    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/auth.css">
    <link rel="stylesheet" href="assets/css/profile.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
<div class="profile-page">
    <div class="profile-topbar">
        <a href="app.html" class="btn-back-profile">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"/></svg>
            Back to Chat
        </a>
        <h1 class="profile-page-title">Profile Settings</h1>
        <div style="width:120px"></div>
    </div>

    <div class="profile-body">

        <!-- Photo -->
        <section class="profile-section">
            <h2 class="section-heading">Profile Photo</h2>
            <div class="avatar-section">
                <div class="avatar avatar-xl" id="profile-avatar">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                </div>
                <div class="avatar-actions">
                    <button class="btn btn-secondary" id="avatar-btn" type="button">Change Photo</button>
                    <input type="file" id="avatar-input" accept="image/*" style="display:none">
                    <p id="avatar-cooldown-info" class="field-hint">Can be changed once per week.</p>
                </div>
            </div>
        </section>

        <!-- Display Name -->
        <section class="profile-section">
            <h2 class="section-heading">Display Name</h2>
            <div id="error-message" class="error-message"></div>
            <form id="profile-form">
                <div class="form-field">
                    <label for="displayName">Display Name</label>
                    <input type="text" id="displayName" placeholder="Your full name" required>
                </div>
                <div class="form-field">
                    <label for="email">Email <span class="field-label-note">(cannot change)</span></label>
                    <input type="email" id="email" disabled>
                </div>
                <button type="submit" class="btn btn-primary">
                    <span class="btn-text">Save Name</span>
                    <span class="btn-loading hidden"><svg class="spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" stroke-opacity=".25"/><path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"/></svg></span>
                </button>
            </form>
        </section>

        <!-- Username -->
        <section class="profile-section">
            <h2 class="section-heading">Username</h2>
            <p class="section-desc">Unique @handle — people can find you by this. Can be changed once per week.</p>
            <form id="username-form">
                <div class="form-field">
                    <label for="username">Username</label>
                    <div style="position:relative">
                        <span style="position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--color-text-tertiary);font-weight:600;pointer-events:none">@</span>
                        <input type="text" id="username" placeholder="yourhandle" style="padding-left:30px" maxlength="30">
                    </div>
                    <span id="username-cooldown-info" class="field-hint">Can be changed once per week.</span>
                </div>
                <button type="submit" class="btn btn-primary" id="username-submit-btn">
                    <span class="btn-text">Save Username</span>
                    <span class="btn-loading hidden"><svg class="spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" stroke-opacity=".25"/><path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"/></svg></span>
                </button>
            </form>
        </section>

        <!-- Password -->
        <section class="profile-section">
            <h2 class="section-heading">Change Password</h2>
            <form id="password-form">
                <div class="form-field">
                    <label for="new-password">New Password</label>
                    <input type="password" id="new-password" placeholder="Min. 6 characters" minlength="6">
                </div>
                <div class="form-field">
                    <label for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" placeholder="Repeat new password">
                </div>
                <button type="submit" class="btn btn-primary">
                    <span class="btn-text">Update Password</span>
                    <span class="btn-loading hidden"><svg class="spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" stroke-opacity=".25"/><path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"/></svg></span>
                </button>
            </form>
        </section>

        <!-- Appearance -->
        <section class="profile-section">
            <h2 class="section-heading">Appearance</h2>
            <div class="theme-row">
                <div class="theme-info">
                    <span class="theme-label">Theme</span>
                    <span class="theme-value" id="theme-value">Light</span>
                </div>
                <button class="btn btn-secondary" id="theme-toggle-btn" type="button">Toggle Dark Mode</button>
            </div>
        </section>

        <!-- Account -->
        <section class="profile-section profile-section-danger">
            <h2 class="section-heading">Account</h2>
            <button type="button" class="btn btn-danger" id="logout-btn">Log Out</button>
        </section>

    </div>
</div>

<div id="toast-container" class="toast-container"></div>
<script type="module" src="assets/js/profile.js"></script>
</body>
</html>
